<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="color-scheme" content="dark light"/>
  <title>Fairt · 宏观</title>
  <link rel="stylesheet" href="./assets/style.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body data-page="macro">
<div class="wrap">

  <div class="nav">
    <div class="brand">Fairt · 投研自动化</div>
    <div class="tabs">
      <a class="tab" href="./index.html">首页</a>
      <a class="tab" href="./dashboard.html">总览</a>
      <a class="tab active" href="./macro.html">宏观</a>
      <a class="tab" href="./ashares.html">A股</a>
      <a class="tab" href="./copper.html">铜</a>
      <a class="tab" href="./method.html">方法</a>
      <a class="tab" href="./changelog.html">更新</a>
      <a class="tab" href="./about.html">关于</a>
    </div>
  </div>

  <div class="hero">
    <h1>宏观 · 专题页 <span class="pill mono" id="date">—</span></h1>
    <div class="sub muted">机构监控风格：只做结构化整理，不输出观点。</div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="card-hd">
        <div class="card-title">今日三句话</div>
        <div class="card-note muted mono">briefing</div>
      </div>
      <div class="card-bd">
        <ol id="insights" class="list"></ol>
        <div id="m_err" class="footer mono"></div>
      </div>
    </div>

    <div class="card">
      <div class="card-hd">
        <div class="card-title">搜索</div>
        <div class="card-note muted">实时过滤</div>
      </div>
      <div class="card-bd">
        <input id="search" class="search" placeholder="输入关键词过滤：通胀 / 经济 / 流动性 / 信用 / 汇率 / 地缘"/>
        <div class="footer">提示：输入后立刻过滤 Top 列表。</div>
      </div>
    </div>
  </div>

  <div class="card wide">
    <div class="card-hd">
      <div class="card-title">Top 列表</div>
      <div class="card-note muted mono">priority list</div>
    </div>
    <div class="card-bd">
      <ol id="toplist" class="list"></ol>
    </div>
  </div>

  <div class="card wide">
    <div class="card-hd">
      <div class="card-title">可视化</div>
      <div class="card-note muted">distribution / trend / gauge</div>
    </div>
    <div class="card-bd">
      <div class="viz">
        <div class="viz-item">
          <div class="label muted">Distribution</div>
          <canvas id="mainPie" height="180"></canvas>
        </div>
        <div class="viz-item">
          <div class="label muted">Sub Factors</div>
          <canvas id="subPie" height="180"></canvas>
        </div>
        <div class="viz-item">
          <div class="label muted">Trend (EMA)</div>
          <canvas id="trend" height="180"></canvas>
        </div>
        <div class="viz-item">
          <div class="label muted">Risk Gauge</div>
          <canvas id="gauge" height="180"></canvas>
        </div>
      </div>
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="card-hd">
        <div class="card-title">Radar</div>
        <div class="card-note muted">factor_scores</div>
      </div>
      <div class="card-bd">
        <canvas id="radar" height="220"></canvas>
      </div>
    </div>

    <div class="card">
      <div class="card-hd">
        <div class="card-title">Histogram</div>
        <div class="card-note muted">history score</div>
      </div>
      <div class="card-bd">
        <canvas id="hist" height="220"></canvas>
      </div>
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="card-hd">
        <div class="card-title">Regime Timeline</div>
        <div class="card-note muted mono">last 50</div>
      </div>
      <div class="card-bd">
        <div id="timeline" class="timeline"></div>
        <div class="footer muted">说明：每格代表一天，颜色为 regime。</div>
      </div>
    </div>

    <div class="card">
      <div class="card-hd">
        <div class="card-title">Regime Log</div>
        <div class="card-note muted">switches</div>
      </div>
      <div class="card-bd">
        <div id="regimeLog" class="table"></div>
        <div class="footer muted">说明：只记录 regime 变化点。</div>
      </div>
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="card-hd">
        <div class="card-title">Quick KPIs</div>
        <div class="card-note muted">top line</div>
      </div>
      <div class="card-bd">
        <div class="table">
          <div class="row"><div class="k">Risk</div><div class="v mono" id="k_risk">—</div></div>
          <div class="row"><div class="k">Δ (1D)</div><div class="v mono" id="k_d1">—</div></div>
          <div class="row"><div class="k">Regime</div><div class="v mono" id="k_reg">—</div></div>
          <div class="row"><div class="k">Theme</div><div class="v" id="k_theme">—</div></div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-hd">
        <div class="card-title">Risk Factors</div>
        <div class="card-note muted">ranked</div>
      </div>
      <div class="card-bd">
        <div class="table" id="rfactors"></div>
        <div class="footer muted mono" id="rfactors_meta"></div>
      </div>
    </div>

    <div class="card">
      <div class="card-hd">
        <div class="card-title">Factor Contribution</div>
        <div class="card-note muted">contrib</div>
      </div>
      <div class="card-bd">
        <div class="table" id="rcontrib"></div>
      </div>
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="card-hd">
        <div class="card-title">Stability (20D)</div>
        <div class="card-note muted">stable vs volatile</div>
      </div>
      <div class="card-bd">
        <div class="table">
          <div class="row"><div class="k">Stable</div><div class="v" id="stable">—</div></div>
          <div class="row"><div class="k">Volatile</div><div class="v" id="volatile">—</div></div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-hd">
        <div class="card-title">Date / Proof</div>
        <div class="card-note muted">reproduce</div>
      </div>
      <div class="card-bd">
        <div class="row" style="gap:10px; display:flex; align-items:center;">
          <input id="dateInput" class="search" placeholder="YYYY-MM-DD" style="max-width:220px;"/>
          <button id="btnGo" class="btn">Go</button>
          <div class="muted mono">?date=YYYY-MM-DD</div>
        </div>
        <div class="footer muted">说明：同一 date + topic 生成一致，可用于归档复现。</div>
      </div>
    </div>
  </div>

  <script src="./assets/app.js"></script>
</div>
</body>
</html>